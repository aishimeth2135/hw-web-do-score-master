version: '2'

services:
    # mongodb資料庫
    # In your application container, use the hostname mongodb to connect to the MongoDB server
    mongodb:
      image: 'bitnami/mongodb:latest'
      environment:
        - ALLOW_EMPTY_PASSWORD=yes
        - MONGODB_ENABLE_IPV6=false

    express:
        tty: true # Enables debugging capabilities when attached to this container.
        image: 'docker.io/bitnami/express:4-debian-10'
        command: npm start
        environment:
            - PORT=3000
            - NODE_ENV=development
            - DATABASE_URL=mongodb://mongodb:27017/do_score

            - SKIP_DB_WAIT=0
            - SKIP_DB_MIGRATION=0
            - SKIP_NPM_INSTALL=0
            - SKIP_BOWER_INSTALL=0
        depends_on:
            - mongodb
        #ports:
        #    - 3000:3000
        volumes:
            - .:/app